

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NanoVer Architecture &mdash; NanoVer documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=23fdb008" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=23fdb008" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a1998fca"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/custom.js?v=6d5f2585"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Trajectories and Frames" href="frames.html" />
    <link rel="prev" title="Concepts" href="concepts.html" />
 
<link rel="icon" type="image/x-icon" href="../_static/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="../_static/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../_static/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="../_static/favicon.png">
<link rel="mask-icon" href="../_static/favicon.svg" color="#5bbad5">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            NanoVer
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../highlights.html">Highlights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation &amp; Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="concepts.html">Concepts</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">NanoVer Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#services">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#an-example-interactive-molecular-dynamics">An Example: Interactive Molecular Dynamics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vr-front-end">VR Front End</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="frames.html">Trajectories and Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="recording.html">Recording simulations using NanoVer</a></li>
<li class="toctree-l2"><a class="reference internal" href="base-protocol.html">The NanoVer gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications.html">Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citations.html">How to Cite NanoVer</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NanoVer</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="concepts.html">Concepts</a></li>
      <li class="breadcrumb-item active">NanoVer Architecture</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/concepts/architecture.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nanover-architecture">
<h1>NanoVer Architecture<a class="headerlink" href="#nanover-architecture" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#services" id="id2">Services</a></p></li>
<li><p><a class="reference internal" href="#an-example-interactive-molecular-dynamics" id="id3">An Example: Interactive Molecular Dynamics</a></p></li>
<li><p><a class="reference internal" href="#vr-front-end" id="id4">VR Front End</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>NanoVer is a set of protocols, libraries and programs for performing interactive simulations,
with a focus on virtual reality (VR).</p>
<p>At the highest level, NanoVer uses a client/server model, in which a frontend application connects
to a server that runs a simulation in real-time, establishing an interactive session.
Simulation data, interactions and controls are transmitted over the network between the client and server.
There a several good reasons for using this model:</p>
<ul class="simple">
<li><p><strong>Separation of concerns</strong>. Keeping the simulation separate from the visualisation
makes it easier to customise and add new features. You want to swap out a
molecular simulation for a galaxy simulation? Just change the server!</p></li>
<li><p><strong>Scientific software is often written in different programming languages to
those that are best suited for visualisation</strong>. For example, most of our
molecular dynamics simulations run using python, while our VR application
is written in C#.</p></li>
<li><p><strong>The server can be running wherever it is convenient</strong>, be it on your desktop,
a cluster behind a firewall or on a cloud service, while multiple frontend
applications can connect simultaneously, such as a VR app,
smartphone app, or a Jupyter notebook.</p></li>
</ul>
</section>
<section id="services">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Services</a><a class="headerlink" href="#services" title="Link to this heading"></a></h2>
<p>While the client/server model is useful, implementing monolithic client/server applications is not ideal,
as it limits the customisability and extensibility of the framework.
Instead, in NanoVer we have adopted a microservices architecture, in which many modular services communicate.</p>
<p>This architecture makes NanoVer very flexible.
New features can be added as new services as needed, without cluttering up the main framework.
We provide a number of service definitions and implementations, including:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python/nanover.trajectory.html"><span class="doc">nanover.trajectory</span></a>: Provides trajectories and live simulations.</p></li>
<li><p><a class="reference internal" href="../python/nanover.state.html"><span class="doc">nanover.state</span></a>: Provides synchronisation of avatars and state for multiplayer applications.</p></li>
<li><p><a class="reference internal" href="../python/nanover.command.html"><span class="doc">nanover.command</span></a>: Provides facilities to run arbitrary functions performed by the server.</p></li>
</ul>
<p>The services described above provide the core for the NanoVer iMD-VR application, but the tools
can be used to create custom services for different applications.</p>
<p>These services are written using <a class="reference external" href="https://grpc.io/">gRPC</a>, a framework for remote procedure calls.
The key features that make it great for NanoVer are:</p>
<ul class="simple">
<li><p><strong>High performance, fast communication</strong>.</p></li>
<li><p><strong>Bidirectional streaming</strong>. Clients and servers can establish long lived
connections and stream data to and from each other flexibly.</p></li>
<li><p><strong>Language portable</strong>. Clients and servers can be written in many languages,
including C#, Python and C++.</p></li>
<li><p><strong>Built on HTTP2</strong>, so includes routing, authentication and security.</p></li>
</ul>
</section>
<section id="an-example-interactive-molecular-dynamics">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">An Example: Interactive Molecular Dynamics</a><a class="headerlink" href="#an-example-interactive-molecular-dynamics" title="Link to this heading"></a></h2>
<p>The canonical NanoVer session is one of interactive molecular dynamics (IMD), where one or more front end applications
connect to a live simulation that can be visualised and interacted with through biasing potentials.</p>
<p>Conceptually, the IMD server consists of three services: a trajectory service, a state service, and a command service.</p>
<ul class="simple">
<li><p><strong>The trajectory service</strong> provides updates as the state of the simulation progresses, enabling real-time analysis and
visualisation of the system.</p></li>
<li><p><strong>The state service</strong>, meanwhile, takes care of incoming requests from the client applications to apply biasing potentials
to the simulation. These are applied as forces to the molecular dynamics engine, which in turn integrates them.
This service allows synchronisation of the state between all the clients and the server
(note that these can be any arbitrary state variables).
For instance, it synchronises the position of the users’ avatars, allowing multi-user collaboration.
It broadcasts users’ avatar positions, therefore allowing multiuser collaboration with no server modification.</p></li>
<li><p><strong>The command service</strong> facilitates the communication of commands between the client and the server.
For example, these could be playback control commands, such as requests to pause or reset the simulation.
You can also create your own custom commands that can be handled by this service.</p></li>
</ul>
<p>A server application can leverage these three services to implement IMD to facilitate the visualisation of, and
interaction with, a simulation in real time.</p>
</section>
<section id="vr-front-end">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">VR Front End</a><a class="headerlink" href="#vr-front-end" title="Link to this heading"></a></h2>
<p>The VR front end app, <a class="reference internal" href="../tutorials/vrclient.html#vr-client-tutorial"><span class="std std-ref">NanoVer iMD-VR</span></a>, intended for 3D visualisation and
intuitive spatial iMD (iMD-VR), is a <a class="reference external" href="https://github.com/IRL2/nanover-imd-vr">distinct Unity/C# codebase</a>
that follows the <a class="reference external" href="https://github.com/IRL2/nanover-server-py/tree/main/protocol/nanover/protocol">gRPC protocol definitions</a>
and <a class="reference internal" href="applications.html#applications"><span class="std std-ref">application conventions</span></a> laid out in the present documentation.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="concepts.html" class="btn btn-neutral float-left" title="Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="frames.html" class="btn btn-neutral float-right" title="Trajectories and Frames" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Intangible Realities Lab | University of Santiago de Compostela | University of Bristol | and other contributors. Last updated on Fri, 06 Dec 2024 11:19:55 UTC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>